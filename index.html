<!doctype html>
<html lang="sk">
<head>
  <meta charset="utf-8" />
  <title>Escape the Phasor ‚Äì Wireframe v2</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    :root{
      --metal-1:#4A4E52; --metal-2:#565A60; --metal-3:#2E3135;
      --cream:#FCF6E6; --grid:#C6FFFF; --grid-10:#9EEFEF;
      --ok:#23c55e; --fail:#ff3b3b; --hud:#1f2937; --hudText:#f8fafc;
      --radius:14px;
    }
    *{box-sizing:border-box}
    body{margin:0;background:linear-gradient(180deg,#0f1216,#171a1f);}
    /* Kovov√Ω r√°m (stredn√° hr√∫bka) */
    .frame{
      max-width: 1280px; margin: 24px auto; padding: 16px;
      background: linear-gradient(135deg,var(--metal-2),var(--metal-3));
      border: 6px solid var(--metal-1);
      border-radius: 18px; box-shadow: 0 10px 40px rgba(0,0,0,.4);
      position: relative;
    }
    /* ‚Äûnity‚Äú v rohoch */
    .frame::before,.frame::after{
      content:""; position:absolute; width:14px; height:14px; border-radius:50%;
      background: radial-gradient(circle at 30% 30%, #d6cba8 0 40%, #867f6a 60% 100%);
      box-shadow: inset 0 0 2px rgba(0,0,0,.5);
    }
    .frame::before{left:10px; top:10px}
    .frame::after{right:10px; top:10px}
    .row{display:flex; gap:16px}

    /* Horn√Ω rad ‚Äì tri panely v jednej l√≠nii */
    .top{align-items:center}
    .panel{
      background: rgba(255,255,255,0.03);
      border:1px solid rgba(255,255,255,0.08);
      border-radius: var(--radius);
      padding: 12px;
      backdrop-filter: blur(2px);
      color:#e5e7eb;
      min-height: 120px;
    }
    .dr, .student{flex:0 0 23%;}
    .task{flex:1; min-height: 160px; position:relative; display:flex; flex-direction:column;}
    .task h2{margin:0 0 8px 0; font-size:18px}
    .task .scroll{
      overflow:auto; max-height:120px; padding-right:8px;
    }

    /* Bublina Dr. Phasora (s kr√≠≈æikom) */
    .bubble{
      position:absolute; left: 12px; top: -10px;
      max-width: 260px; background:#fff; color:#111;
      border-radius: 12px; padding:10px 36px 10px 12px;
      box-shadow:0 10px 20px rgba(0,0,0,.25);
      border:2px solid #6b4ca6;
      transform: translateY(-100%); /* nad panel */
    }
    .bubble:after{
      content:""; position:absolute; bottom:-10px; left:24px;
      border:10px solid transparent; border-top-color:#fff;
      filter: drop-shadow(0 -2px 0 #6b4ca6);
    }
    .bubble .close{
      position:absolute; right:8px; top:4px; width:24px; height:24px;
      display:grid; place-items:center; cursor:pointer;
      font-weight:bold; border-radius:6px; color:#6b4ca6;
    }
    .bubble .close:hover{background:#f2eaff}

    /* Stƒ∫pec z√°mkov vpravo */
    .locks{
      display:flex; flex-direction:column; gap:6px;
      margin-left:auto;
    }
    .lock{
      width:26px; height:26px; border-radius:6px;
      background: #0e1218; border:1px solid #2a3039;
      display:grid; place-items:center; color:#fcd34d; font-size:16px;
      box-shadow: inset 0 0 6px rgba(0,0,0,.6);
    }

    /* Hern√© pl√°tno 16:9 s dvoma ≈°tvorcami */
    .play{margin-top:16px; position:relative;}
    .play-169{
      width:100%; aspect-ratio: 16 / 9;
      background: radial-gradient(1200px 800px at 20% -10%, rgba(255,255,255,.05), transparent 60%),
                  radial-gradient(900px 600px at 80% 120%, rgba(255,255,255,.04), transparent 60%),
                  linear-gradient(135deg, rgba(255,255,255,.02), transparent);
      border:1px solid rgba(255,255,255,0.08);
      border-radius: var(--radius);
      padding:12px; display:flex; gap:12px; align-items:center; justify-content:center;
    }
    .square{
      flex:0 0 calc(50% - 6px);
      aspect-ratio: 1 / 1;
      border-radius: var(--radius);
      background: var(--cream);
      position:relative; overflow:hidden;
      box-shadow: inset 0 0 0 1px rgba(0,0,0,.06);
    }
    /* Mrie≈æka: tyrkys, jemn√° + ka≈æd√Ω 10. riadok */
    .square::before{
      content:""; position:absolute; inset:0;
      background:
        repeating-linear-gradient(0deg, var(--grid) 0 1px, transparent 1px 20px),
        repeating-linear-gradient(90deg, var(--grid) 0 1px, transparent 1px 20px),
        repeating-linear-gradient(0deg, transparent 0 200px, var(--grid-10) 200px 201px, transparent 201px 400px),
        repeating-linear-gradient(90deg, transparent 0 200px, var(--grid-10) 200px 201px, transparent 201px 400px);
      opacity:.55;
    }

    /* Spodn√Ω HUD */
    .hud{
      margin-top:12px; padding:10px 12px;
      background: var(--hud); color:var(--hudText);
      border-radius: var(--radius);
      display:flex; flex-wrap:wrap; gap:10px; align-items:center; justify-content:space-between;
      font: 500 14px/1.2 system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial;
    }
    .hud .group{display:flex; gap:14px; align-items:center}
    .pill{
      background:#111827; padding:6px 10px; border-radius:999px; border:1px solid #374151;
    }

    /* Typografia ‚Äì na≈°e normy */
    .math var{font-style: italic}
    .math sub{font-style: normal} /* indexy stojat√Ωm rezom */
    .phi{font-family: "Cambria Math","STIX Two Math","DejaVu Sans",serif}
    .shake{animation:shake .35s}
    @keyframes shake {
      0%,100%{transform:translateX(0)}
      20%{transform:translateX(-6px)} 40%{transform:translateX(6px)}
      60%{transform:translateX(-4px)} 80%{transform:translateX(4px)}
    }
    .flash{animation:flash .4s}
    @keyframes flash { 0%{background:#2b1111} 100%{background:transparent} }
    @media (max-width: 1200px){
      .dr,.student{flex-basis: 25%}
    }
    /* OSC ‚Äì pl√°tno roztiahnu≈•, udr≈æa≈• pixel ratio */
#osc{ position:absolute; inset:0; width:100%; height:100%; }

/* UI pod osciloskopom */
.osc-ui{
  position:absolute; left:12px; bottom:12px; right:12px;
  display:flex; justify-content:flex-start; gap:16px;
  padding:8px 10px; border-radius:10px;
  background: rgba(0,0,0,.08);
  border:1px solid rgba(0,0,0,.12);
  backdrop-filter: blur(1px);
  color:#111;
}
.osc-ui label{ font-weight:600; }
.osc-ui input[type="range"]{ width:220px; vertical-align:middle; margin:0 8px; }

/* Prav√° z√≥na ‚Äì krabiƒçky */
.taskBox, .answerBox{
  position: absolute; left: 18px; right: 18px;
  background: rgba(255,255,255,.7); border:1px solid rgba(0,0,0,.1);
  border-radius: 12px; padding: 12px; color:#111;
  box-shadow: 0 3px 10px rgba(0,0,0,.08);
}
.taskBox{ top: 18px; }
.taskBox .line{ margin: 2px 0; }
.taskBox .small{ opacity:.8; }

.answerBox{
  bottom: 18px; display:flex; align-items:center; gap:12px; flex-wrap:wrap;
}
.answerBox input{
  width: 140px; padding:6px 8px; border-radius:8px; border:1px solid #c9c9c9;
}
.answerBox button{
  padding:8px 14px; border-radius:10px; border:1px solid #1f2937;
  background:#111827; color:#f8fafc; cursor:pointer;
}
.feedback{ min-height: 1.2em; font-weight:700; }

/* ≈ælt√° cartoon iskra */
.spark{
  position:absolute; width:160px; height:160px; pointer-events:none; display:none;
  background: radial-gradient(circle at 50% 50%, #FFD745 0 30%, rgba(255,215,69,.6) 35% 55%, transparent 60%),
              conic-gradient(from 0deg, rgba(255,215,69,.9), rgba(243,190,87,.6), rgba(255,237,154,.7), rgba(255,215,69,.9));
  filter: blur(1px) drop-shadow(0 0 10px rgba(255,215,69,.7));
  border-radius:50%;
  transform: translate(-50%, -50%) scale(.8);
  animation: spark .6s ease-out forwards;
}
@keyframes spark {
  0%{ opacity:.0; transform:translate(-50%,-50%) scale(.4) rotate(0deg); }
  20%{ opacity:1; transform:translate(-50%,-50%) scale(1.05) rotate(12deg); }
  100%{ opacity:0; transform:translate(-50%,-50%) scale(1.1) rotate(22deg); }
}

  </style>
</head>
<body>
  <main class="frame">
    <!-- Horn√Ω rad -->
    <section class="row top">
      <div class="panel dr" id="dr">
        <!-- Bublina s kr√≠≈æikom (zatv√°ra sa len X) -->
        <div class="bubble" id="bubble">
          <div class="close" id="bubbleClose">√ó</div>
          MUHAHA! Nov√© zadanie ƒçak√°‚Ä¶
        </div>
        <strong>Dr. Phasor</strong>
        <!-- sem nesk√¥r sprite -->
      </div>

      <div class="panel task" id="taskPanel">
        <h2>√öloha</h2>
        <div class="scroll math" id="taskText">
          Vypoƒç√≠taj <var>u</var>(<var>t</var>) pri <var>U</var>=230&nbsp;V, <var>f</var>=50&nbsp;Hz, <span class="phi">œÜ</span>=10¬∞.
          <br>Vzorec: <var>u</var>(<var>t</var>) = <var>U</var><sub>m</sub> sin(<var>œât</var> + <span class="phi">œÜ</span>)
        </div>
      </div>

      <div class="panel student">
        <strong>≈†tudent</strong>
        <div class="locks" aria-label="Z√°mky">
          <div class="lock">üîí</div><div class="lock">üîí</div><div class="lock">üîí</div><div class="lock">üîí</div><div class="lock">üîí</div>
          <div class="lock">üîí</div><div class="lock">üîí</div><div class="lock">üîí</div><div class="lock">üîí</div><div class="lock">üîí</div>
        </div>
      </div>
    </section>

    <!-- Hern√© pl√°tno 16:9 -> dva ≈°tvorce -->
    <section class="play">
  <div class="workbench">
    <!-- ƒΩAV√Å Z√ìNA ‚Äì osciloskop -->
    <div class="zone left" id="leftZone">
      <canvas id="osc" aria-label="osciloskop"></canvas>

      <div class="osc-ui">
        <label>ƒåas <var>t</var>: 
          <input id="tSlider" type="range" min="0" max="20" step="0.1" value="2">
          <span id="tReadout">2.0 ms</span>
        </label>
      </div>
    </div>

    <!-- PRAV√Å Z√ìNA ‚Äì zadanie + odpoveƒè -->
    <div class="zone right" id="rightZone">
      <div class="taskBox math" id="taskBox">
        <div class="line"><strong>Zadanie:</strong> Vypoƒç√≠taj <var>u</var>(<var>t</var>) v ƒçase <span id="tGiven">2.0</span> ms pre</div>
        <div class="line">&nbsp;&nbsp;<var>u</var>(<var>t</var>) = <var>U</var><sub>m</sub> sin(<var>œât</var> + œÜ)</div>
        <div class="line small">&nbsp;&nbsp;kde <var>U</var><sub>m</sub> = ‚àö2 ¬∑ <var>U</var></div>
        <div class="line">Parametre: <var>U</var> = <span id="Ueff">230</span> V,&nbsp; <var>f</var> = <span id="freq">50</span> Hz,&nbsp; œÜ = <span id="phiDeg">10</span>¬∞</div>
      </div>

      <div class="answerBox">
        <label>Odpoveƒè: <var>u</var>(<var>t</var>) = 
          <input id="answer" type="number" step="0.01" placeholder="V">
          <span>V</span>
        </label>
        <button id="checkBtn">Skontrolova≈•</button>
        <div id="feedback" class="feedback"></div>
      </div>
    </div>
  </div>

  <!-- efekt iskry pri √∫spechu -->
  <div id="spark" class="spark" aria-hidden="true"></div>
</section>


    <!-- HUD -->
    <section class="hud" id="hud">
      <div class="group">
        <span class="pill">TIME: 01:23</span>
        <span class="pill">MODE: EASY</span>
        <span class="pill">MISTAKES: 0/2</span>
        <span class="pill">LOCKS LEFT: 10</span>
      </div>
      <div class="group">
        <button class="pill" id="hintBtn">HINT</button>
      </div>
    </section>
  </main>

  <script>
    // Zatv√°ranie Phasorovej bubliny len cez X
    document.getElementById('bubbleClose').addEventListener('click', () => {
      document.getElementById('bubble').style.display = 'none';
    });

    // Uk√°≈æka vizu√°lnej chyby: flash + shake (1C)
    function showFailFeedback(){
      const panel = document.getElementById('taskPanel');
      panel.classList.add('shake','flash');
      setTimeout(()=>panel.classList.remove('shake','flash'), 450);
    }
    // // odkomentuj na test
    // setTimeout(showFailFeedback, 1200);
  </script>
</body>
</html>
